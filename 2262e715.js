!function(){"use strict";function e(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))}function t(){}function r(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(r)}function a(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function l(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function c(e,r,n){e.$$.on_destroy.push(function(e,...r){if(null==e)return t;const n=e.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}(r,n))}function u(e){return null==e?"":e}let d,p="undefined"!=typeof window?e=>requestAnimationFrame(e):t;function h(e,t){e.appendChild(t)}function f(e,t,r){const n=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;if(t&&t.host)return t;return e.ownerDocument}(e);if(!n.getElementById(t)){const e=g("style");e.id=t,e.textContent=r,function(e,t){h(e.head||e,t)}(n,e)}}function v(e,t,r){e.insertBefore(t,r||null)}function m(e){e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function A(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function y(e){return document.createTextNode(e)}function k(){return y(" ")}function T(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function b(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function R(e,t,r,n){e.style.setProperty(t,r,n?"important":"")}function w(e){d=e}function E(){if(!d)throw new Error("Function called outside component initialization");return d}function x(e){E().$$.on_mount.push(e)}function N(e){E().$$.on_destroy.push(e)}const L=[],C=[],I=[],U=[],S=Promise.resolve();let D=!1;function O(e){I.push(e)}const V=new Set;let P=0;function B(){const e=d;do{for(;P<L.length;){const e=L[P];P++,w(e),$(e.$$)}for(w(null),L.length=0,P=0;C.length;)C.pop()();for(let e=0;e<I.length;e+=1){const t=I[e];V.has(t)||(V.add(t),t())}I.length=0}while(L.length);for(;U.length;)U.pop()();D=!1,V.clear(),w(e)}function $(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(O)}}const F=new Set;let M;function _(){M={r:0,c:[],p:M}}function j(){M.r||i(M.c),M=M.p}function q(e,t){e&&e.i&&(F.delete(e),e.i(t))}function W(e,t,r,n){if(e&&e.o){if(F.has(e))return;F.add(e),M.c.push((()=>{F.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}}const H="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function z(e){e&&e.c()}function Q(e,t,n,o){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=e.$$;s&&s.m(t,n),o||O((()=>{const t=l.map(r).filter(a);c?c.push(...t):i(t),e.$$.on_mount=[]})),u.forEach(O)}function G(e,t){const r=e.$$;null!==r.fragment&&(i(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Y(e,t){-1===e.$$.dirty[0]&&(L.push(e),D||(D=!0,S.then(B)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(e,r,a,o,s,l,c,u=[-1]){const p=d;w(e);const h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(p?p.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||p.$$.root};c&&c(h.root);let f=!1;if(h.ctx=a?a(e,r.props||{},((t,r,...n)=>{const i=n.length?n[0]:r;return h.ctx&&s(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),f&&Y(e,t)),r})):[],h.update(),f=!0,i(h.before_update),h.fragment=!!o&&o(h.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);h.fragment&&h.fragment.l(e),e.forEach(m)}else h.fragment&&h.fragment.c();r.intro&&q(e.$$.fragment),Q(e,r.target,r.anchor,r.customElement),B()}w(p)}class X{$destroy(){G(this,1),this.$destroy=t}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Z;!function(e){e["no active campaigns"]="901",e["Некорректный VAST, отсутствует параметр ads"]="902",e["Превышен лимит перезапроса VAST"]="903",e["Истекло время на отсылку Impression"]="905",e["Ошибка загрузки VPAID"]="906",e["VPAID не валиден, так как не предоставляет все обязательные методы"]="907",e["Слишком долгое ожидание инициализации стороннего плеера"]="908",e["VPAID AdError"]="909",e["Ошибка на этапе инициализации плеера"]="910",e["Не корректный VAST (common)"]="911",e["В текущем VAST не осталось рекламных компаний, запрашиваю новый VAST"]="912",e["Пользователь прервал работу плеера переходом на другую страницу"]="913",e["Ошибка при перезапуске плеера"]="914",e["Сетевая ошибка получения VAST"]="915"}(Z||(Z={}));class J extends Error{constructor(e){super(e),this.name="TerminateError"}toString(){return`[object ${this.name}]`}}const ee=["video/mp4","video/xflv","video/mpeg","video/ogg","video/quicktime","video/webm"],te=e=>ee.some((t=>t===e)),re=e=>{const t=e.getBoundingClientRect();return t.top>-t.height/2&&t.bottom<=document.documentElement.clientHeight+t.height/2};class ne extends Error{constructor(e){super(e),this.name="ReinitError"}toString(){return`[object ${this.name}]`}}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t,r){return t&&le(e.prototype,t),r&&le(e,r),e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}function he(e,t){return he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},he(e,t)}function fe(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pe(e);if(t){var i=pe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fe(this,r)}}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdId:{value:null,idRegistry:"unknown"},creativeExtensions:[]}}var ge=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[],i=Te(e);for(var a in!t.ERRORCODE||r.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=Ee(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[a]=we(t[a]);for(var o in i){var s=i[o];"string"==typeof s&&n.push(ye(s,t))}return n}function ye(e,t){var r=(e=ke(e,t)).match(/[^[\]]+(?=])/g);if(!r)return e;var n=r.filter((function(e){return ge.indexOf(e)>-1}));return 0===n.length?e:ke(e,n=n.reduce((function(e,t){return e[t]=-1,e}),{}))}function ke(e,t){var r=e;for(var n in t){var i=t[n];r=r.replace(new RegExp("(?:\\[|%{2}|%5B)(".concat(n,")(?:\\]|%{2}|%5D)"),"g"),i)}return r}function Te(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty("url")?e.url:e})):e}function be(e,t){for(var r=0;r<t.length;r++)if(Re(t[r],e))return!0;return!1}function Re(e,t){if(e&&t){var r=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t);return r.length===n.length&&(e.id===t.id&&e.url===t.url)}return!1}function we(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=String(e);return r.length<t?xe(0,t-r.length,!1).map((function(){return"0"})).join("")+r:r}function xe(e,t,r){for(var n=[],i=e<t,a=r?i?t+1:t-1:t,o=e;i?o<a:o>a;i?o++:o--)n.push(o);return n}var Ne={track:function(e,t,r){Ae(e,t,r).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:Ae,extractURLsFromTemplates:Te,containsTemplateObject:be,isTemplateObjectEqual:Re,encodeURIComponentRFC3986:we,replaceUrlMacros:ye,leftpad:Ee,range:xe,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,r){return t.concat(Array.isArray(r)?e(r):r)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Array.isArray(e)?e:[],n=Array.isArray(t)?t:[],i=r.concat(n);return i.reduce((function(e,t){return be(t,e)||e.push(t),e}),[])}};function Le(e){return-1!==["true","TRUE","True","1"].indexOf(e)}var Ce={childByName:function(e,t){var r=e.childNodes;for(var n in r){var i=r[n];if(i.nodeName===t)return i}},childrenByName:function(e,t){var r=[],n=e.childNodes;for(var i in n){var a=n[i];a.nodeName===t&&r.push(a)}return r},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var r=location.protocol;return"".concat(r).concat(e)}if(-1===e.indexOf("://")){var n=t.slice(0,t.lastIndexOf("/"));return"".concat(n,"/").concat(e)}return e},parseBoolean:Le,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,r){var n=t.getAttribute(e);n&&r.setAttribute(e,n)},parseAttributes:function(e){for(var t=e.attributes,r={},n=0;n<t.length;n++)r[t[n].nodeName]=t[n].nodeValue;return r},parseDuration:function(e){if(null==e)return-1;if(Ne.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var r=t[2].split("."),n=parseInt(r[0]);2===r.length&&(n+=parseFloat("0.".concat(r[1])));var i=parseInt(60*t[1]),a=parseInt(60*t[0]*60);return isNaN(a)||isNaN(i)||isNaN(n)||i>3600||n>60?-1:a+i+n},splitVAST:function(e){var t=[],r=null;return e.forEach((function(n,i){if(n.sequence&&(n.sequence=parseInt(n.sequence,10)),n.sequence>1){var a=e[i-1];if(a&&a.sequence===n.sequence-1)return void(r&&r.push(n));delete n.sequence}r=[n],t.push(r)})),t},assignAttributes:function(e,t){if(e)for(var r in e){var n=e[r];if(n.nodeName&&n.nodeValue&&t.hasOwnProperty(n.nodeName)){var i=n.nodeValue;"boolean"==typeof t[n.nodeName]&&(i=Le(i)),t[n.nodeName]=i}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var r=(t.creatives||[]).filter((function(e){return e&&"companion"===e.type})),n=r.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){Ne.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=r.concat(e.creatives);var i=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,a=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var r in t.trackingEvents[e.type]){var o=t.trackingEvents[e.type][r];Array.isArray(e.trackingEvents[r])||(e.trackingEvents[r]=[]),e.trackingEvents[r]=e.trackingEvents[r].concat(o)}"linear"===e.type&&(i&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),a&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&n.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=Ne.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,n)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function Ie(e,t){var r=function(){var e=me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,n=e.sequence,i=e.apiFramework;return{id:t,adId:r,sequence:n,apiFramework:i,type:"companion",required:null,variations:[]}}(t);return r.required=e.getAttribute("required")||null,r.variations=Ce.childrenByName(e,"Companion").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(Ce.parseAttributes(e));t.htmlResources=Ce.childrenByName(e,"HTMLResource").reduce((function(e,t){var r=Ce.parseNodeText(t);return r?e.concat(r):e}),[]),t.iframeResources=Ce.childrenByName(e,"IFrameResource").reduce((function(e,t){var r=Ce.parseNodeText(t);return r?e.concat(r):e}),[]),t.staticResources=Ce.childrenByName(e,"StaticResource").reduce((function(e,t){var r=Ce.parseNodeText(t);return r?e.concat({url:r,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=Ce.parseNodeText(Ce.childByName(e,"AltText"))||null;var r=Ce.childByName(e,"TrackingEvents");r&&Ce.childrenByName(r,"Tracking").forEach((function(e){var r=e.getAttribute("event"),n=Ce.parseNodeText(e);r&&n&&(Array.isArray(t.trackingEvents[r])||(t.trackingEvents[r]=[]),t.trackingEvents[r].push(n))})),t.companionClickTrackingURLTemplates=Ce.childrenByName(e,"CompanionClickTracking").map((function(e){return{id:e.getAttribute("id")||null,url:Ce.parseNodeText(e)}})),t.companionClickThroughURLTemplate=Ce.parseNodeText(Ce.childByName(e,"CompanionClickThrough"))||null;var n=Ce.childByName(e,"AdParameters");return n&&(t.adParameters=Ce.parseNodeText(n),t.xmlEncoded=n.getAttribute("xmlEncoded")||null),t})),r}function Ue(e){return"linear"===e.type}function Se(e,t){var r,n=function(){var e=me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,n=e.sequence,i=e.apiFramework;return{id:t,adId:r,sequence:n,apiFramework:i,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);n.duration=Ce.parseDuration(Ce.parseNodeText(Ce.childByName(e,"Duration")));var i=e.getAttribute("skipoffset");if(null==i)n.skipDelay=null;else if("%"===i.charAt(i.length-1)&&-1!==n.duration){var a=parseInt(i,10);n.skipDelay=n.duration*(a/100)}else n.skipDelay=Ce.parseDuration(i);var o=Ce.childByName(e,"VideoClicks");if(o){var s=Ce.childByName(o,"ClickThrough");n.videoClickThroughURLTemplate=s?{id:s.getAttribute("id")||null,url:Ce.parseNodeText(s)}:null,Ce.childrenByName(o,"ClickTracking").forEach((function(e){n.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:Ce.parseNodeText(e)})})),Ce.childrenByName(o,"CustomClick").forEach((function(e){n.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:Ce.parseNodeText(e)})}))}var l=Ce.childByName(e,"AdParameters");l&&(n.adParameters=Ce.parseNodeText(l)),Ce.childrenByName(e,"TrackingEvents").forEach((function(e){Ce.childrenByName(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),i=Ce.parseNodeText(e);if(t&&i){if("progress"===t){if(!(r=e.getAttribute("offset")))return;t="%"===r.charAt(r.length-1)?"progress-".concat(r):"progress-".concat(Math.round(Ce.parseDuration(r)))}Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(i)}}))})),Ce.childrenByName(e,"MediaFiles").forEach((function(e){Ce.childrenByName(e,"MediaFile").forEach((function(e){n.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=Ce.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var r=e.getAttribute("scalable");r&&"string"==typeof r&&(t.scalable=Ce.parseBoolean(r));var n=e.getAttribute("maintainAspectRatio");n&&"string"==typeof n&&(t.maintainAspectRatio=Ce.parseBoolean(n));return t}(e))}));var t=Ce.childByName(e,"InteractiveCreativeFile");t&&(n.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:Ce.parseBoolean(e.variableDuration),fileURL:null}}(Ce.parseAttributes(e));return t.fileURL=Ce.parseNodeText(e),t}(t));var r=Ce.childByName(e,"ClosedCaptionFiles");r&&Ce.childrenByName(r,"ClosedCaptionFile").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(Ce.parseAttributes(e));t.fileURL=Ce.parseNodeText(e),n.closedCaptionFiles.push(t)}));var i=Ce.childByName(e,"Mezzanine"),a=function(e,t){var r={},n=!1;return t.forEach((function(t){e&&e.getAttribute(t)?r[t]=e.getAttribute(t):n=!0})),n?null:r}(i,["delivery","type","width","height"]);if(a){var o={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};o.id=i.getAttribute("id"),o.fileURL=Ce.parseNodeText(i),o.delivery=a.delivery,o.codec=i.getAttribute("codec"),o.type=a.type,o.width=parseInt(a.width,10),o.height=parseInt(a.height,10),o.fileSize=parseInt(i.getAttribute("fileSize"),10),o.mediaType=i.getAttribute("mediaType")||"2D",n.mezzanine=o}}));var c=Ce.childByName(e,"Icons");return c&&Ce.childrenByName(c,"Icon").forEach((function(e){n.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){if(-1!==["left","right"].indexOf(e))return e;return parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){if(-1!==["top","bottom"].indexOf(e))return e;return parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=Ce.parseDuration(e.getAttribute("offset")),t.duration=Ce.parseDuration(e.getAttribute("duration")),Ce.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=Ce.parseNodeText(e)})),Ce.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=Ce.parseNodeText(e)})),Ce.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=Ce.parseNodeText(e)}));var r=Ce.childByName(e,"IconClicks");r&&(t.iconClickThroughURLTemplate=Ce.parseNodeText(Ce.childByName(r,"IconClickThrough")),Ce.childrenByName(r,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:Ce.parseNodeText(e)})})));return t.iconViewTrackingURLTemplate=Ce.parseNodeText(Ce.childByName(e,"IconViewTracking")),t}(e))})),n}function De(e,t){var r=function(){var e=me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,n=e.sequence,i=e.apiFramework;return{id:t,adId:r,sequence:n,apiFramework:i,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return Ce.childrenByName(e,"TrackingEvents").forEach((function(e){var t,n;Ce.childrenByName(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),n=Ce.parseNodeText(e),t&&n&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(n))}))})),Ce.childrenByName(e,"NonLinear").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=Ce.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=Ce.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=Ce.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),Ce.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=Ce.parseNodeText(e)})),Ce.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=Ce.parseNodeText(e)})),Ce.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=Ce.parseNodeText(e)}));var n=Ce.childByName(e,"AdParameters");n&&(t.adParameters=Ce.parseNodeText(n)),t.nonlinearClickThroughURLTemplate=Ce.parseNodeText(Ce.childByName(e,"NonLinearClickThrough")),Ce.childrenByName(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:Ce.parseNodeText(e)})})),r.variations.push(t)})),r}function Oe(e){var t=[];return e.forEach((function(e){var r=Ve(e);r&&t.push(r)})),t}function Ve(e){if("#comment"===e.nodeName)return null;var t,r={name:null,value:null,attributes:{},children:[]},n=e.attributes,i=e.childNodes;if(r.name=e.nodeName,e.attributes)for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];o.nodeName&&o.nodeValue&&(r.attributes[o.nodeName]=o.nodeValue)}for(var s in i)if(i.hasOwnProperty(s)){var l=Ve(i[s]);l&&r.children.push(l)}if(0===r.children.length||1===r.children.length&&["#cdata-section","#text"].indexOf(r.children[0].name)>=0){var c=Ce.parseNodeText(e);""!==c&&(r.value=c),r.children=[]}return null===(t=r).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:r}function Pe(e){var t=[];return e.forEach((function(e){var r,n,i={id:e.getAttribute("id")||null,adId:Be(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},a=Ce.childByName(e,"UniversalAdId");a&&(r={idRegistry:a.getAttribute("idRegistry")||"unknown",value:Ce.parseNodeText(a)});var o=Ce.childByName(e,"CreativeExtensions");for(var s in o&&(n=Oe(Ce.childrenByName(o,"CreativeExtension"))),e.childNodes){var l=e.childNodes[s],c=void 0;switch(l.nodeName){case"Linear":c=Se(l,i);break;case"NonLinearAds":c=De(l,i);break;case"CompanionAds":c=Ie(l,i)}c&&(r&&(c.universalAdId=r),n&&(c.creativeExtensions=n),t.push(c))}})),t}function Be(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}var $e={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function Fe(e,t){if($e[e.nodeName]&&$e[e.nodeName].attributes){var r=$e[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));r.length>0&&je({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:r},t)}}function Me(e,t,r){var n=$e[e.nodeName],i=!r&&"Wrapper"!==e.nodeName;if(n&&!i){if(n.subElements){var a=n.subElements.filter((function(t){return!Ce.childByName(e,t)}));a.length>0&&je({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:a},t)}if(r&&n.oneOfinLineResources)n.oneOfinLineResources.some((function(t){return Ce.childByName(e,t)}))||je({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:n.oneOfinLineResources},t)}}function _e(e){return e.children&&0!==e.children.length}function je(e,t){var r=e.name,n=e.parentName,i=e.attributes,a=e.subElements,o=e.oneOfResources,s="Element '".concat(r,"'");t("VAST-warning",{message:s+=i?" missing required attribute(s) '".concat(i.join(", "),"' "):a?" missing required sub element(s) '".concat(a.join(", "),"' "):o?" must provide one of the following '".concat(o.join(", "),"' "):" is empty",parentElement:n,specVersion:4.1})}var qe={verifyRequiredValues:function e(t,r,n){if(t&&t.nodeName)if("InLine"===t.nodeName&&(n=!0),Fe(t,r),_e(t)){Me(t,r,n);for(var i=0;i<t.children.length;i++)e(t.children[i],r,n)}else 0===Ce.parseNodeText(t).length&&je({name:t.nodeName,parentName:t.parentNode.nodeName},r)},hasSubElements:_e,emitMissingValueWarning:je,verifyRequiredAttributes:Fe,verifyRequiredSubElements:Me};function We(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.allowMultipleAds,i=r.followAdditionalWrappers,a=e.childNodes;for(var o in a){var s=a[o];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==i)){if(Ce.copyNodeAttribute("id",e,s),Ce.copyNodeAttribute("sequence",e,s),Ce.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return{ad:Qe(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:He(s,t,{allowMultipleAds:n}),type:"INLINE"}}}}function He(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.allowMultipleAds;return!1===n&&e.getAttribute("sequence")?null:ze(e,t)}function ze(e,t){var r=[];t&&qe.verifyRequiredValues(e,t);var n=e.childNodes,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:{},system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(Ce.parseAttributes(e));for(var a in n){var o=n[a];switch(o.nodeName){case"Error":i.errorURLTemplates.push(Ce.parseNodeText(o));break;case"Impression":i.impressionURLTemplates.push({id:o.getAttribute("id")||null,url:Ce.parseNodeText(o)});break;case"Creatives":i.creatives=Pe(Ce.childrenByName(o,"Creative"));break;case"Extensions":var s=Ce.childrenByName(o,"Extension");i.extensions=Oe(s),i.adVerifications.length||(r=Ye(s));break;case"AdVerifications":i.adVerifications=Ge(Ce.childrenByName(o,"Verification"));break;case"AdSystem":i.system={value:Ce.parseNodeText(o),version:o.getAttribute("version")||null};break;case"AdTitle":i.title=Ce.parseNodeText(o);break;case"AdServingId":i.adServingId=Ce.parseNodeText(o);break;case"Category":i.categories.push({authority:o.getAttribute("authority")||null,value:Ce.parseNodeText(o)});break;case"Expires":i.expires=parseInt(Ce.parseNodeText(o),10);break;case"ViewableImpression":i.viewableImpression=Ke(o);break;case"Description":i.description=Ce.parseNodeText(o);break;case"Advertiser":i.advertiser={id:o.getAttribute("id")||null,value:Ce.parseNodeText(o)};break;case"Pricing":i.pricing={value:Ce.parseNodeText(o),model:o.getAttribute("model")||null,currency:o.getAttribute("currency")||null};break;case"Survey":i.survey=Ce.parseNodeText(o);break;case"BlockedAdCategories":i.blockedAdCategories.push({authority:o.getAttribute("authority")||null,value:Ce.parseNodeText(o)})}}return r.length&&(i.adVerifications=i.adVerifications.concat(r)),i}function Qe(e,t){var r=ze(e,t),n=e.getAttribute("followAdditionalWrappers"),i=e.getAttribute("allowMultipleAds"),a=e.getAttribute("fallbackOnNoAd");r.followAdditionalWrappers=!n||Ce.parseBoolean(n),r.allowMultipleAds=!!i&&Ce.parseBoolean(i),r.fallbackOnNoAd=a?Ce.parseBoolean(a):null;var o=Ce.childByName(e,"VASTAdTagURI");if(o?r.nextWrapperURL=Ce.parseNodeText(o):(o=Ce.childByName(e,"VASTAdTagURL"))&&(r.nextWrapperURL=Ce.parseNodeText(Ce.childByName(o,"URL"))),r.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){r.trackingEvents||(r.trackingEvents={}),r.trackingEvents[e.type]||(r.trackingEvents[e.type]={});var t=function(t){var n=e.trackingEvents[t];Array.isArray(r.trackingEvents[e.type][t])||(r.trackingEvents[e.type][t]=[]),n.forEach((function(n){r.trackingEvents[e.type][t].push(n)}))};for(var n in e.trackingEvents)t(n)}e.videoClickTrackingURLTemplates&&(Array.isArray(r.videoClickTrackingURLTemplates)||(r.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){r.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(r.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(r.videoCustomClickURLTemplates)||(r.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){r.videoCustomClickURLTemplates.push(e)})))}})),r.nextWrapperURL)return r}function Ge(e){var t=[];return e.forEach((function(e){var r={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},n=e.childNodes;for(var i in Ce.assignAttributes(e.attributes,r),n){var a=n[i];switch(a.nodeName){case"JavaScriptResource":case"ExecutableResource":r.resource=Ce.parseNodeText(a),Ce.assignAttributes(a.attributes,r);break;case"VerificationParameters":r.parameters=Ce.parseNodeText(a)}}var o=Ce.childByName(e,"TrackingEvents");o&&Ce.childrenByName(o,"Tracking").forEach((function(e){var t=e.getAttribute("event"),n=Ce.parseNodeText(e);t&&n&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(n))})),t.push(r)})),t}function Ye(e){var t=null,r=[];return e.some((function(e){return t=Ce.childByName(e,"AdVerifications")})),t&&(r=Ge(Ce.childrenByName(t,"Verification"))),r}function Ke(e){var t={};t.id=e.getAttribute("id")||null;var r=e.childNodes;for(var n in r){var i=r[n],a=i.nodeName,o=Ce.parseNodeText(i);if(("Viewable"===a||"NotViewable"===a||"ViewUndetermined"===a)&&o){var s=a.toLowerCase();Array.isArray(t[s])||(t[s]=[]),t[s].push(o)}}return t}var Xe=function(){function e(){se(this,e),this._handlers=[]}return ce(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(oe(t)));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(oe(e)));return this._handlers.push({event:e,handler:t}),this}},{key:"once",value:function(e,t){return this.on(e,function(e,t,r){var n={fired:!1,wrapFn:void 0};function i(){n.fired||(e.off(t,n.wrapFn),n.fired=!0,r.bind(e).apply(void 0,arguments))}return n.wrapFn=i,i}(this,e,t))}},{key:"off",value:function(e,t){return this._handlers=this._handlers.filter((function(r){return r.event!==e||r.handler!==t})),this}},{key:"emit",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=!1;return this._handlers.forEach((function(t){"*"===t.event&&(i=!0,t.handler.apply(t,[e].concat(r))),t.event===e&&(i=!0,t.handler.apply(t,r))})),i}},{key:"removeAllListeners",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:"listeners",value:function(e){return this._handlers.reduce((function(t,r){return r.event===e&&t.push(r.handler),t}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}();var Ze={get:function(e,t,r){r(new Error("Please bundle the library for node to use the node urlHandler"))}},Je=12e4;var et=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};se(this,e),this.timeout=t.seconds||Je,this.timeoutID=void 0}return ce(e,[{key:"start",get:function(){var e=this;return new Promise((function(t,r){e.timeoutID=setTimeout((function(){var t="XHRURLHandler: Request timed out after ".concat(e.timeout," ms (408)");r(new Error(t))}),e.timeout)}))}},{key:"clear",value:function(){this.timeoutID&&clearTimeout(this.timeoutID)}}]),e}();var tt={get:function(e,t,r){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return r(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));var n=t.withCredentials?"include":"omit",i=t.withCredentials?"cors":"no-cors",a=new et({seconds:t.timeout});try{Promise.race([fetch(e,{mode:i,credentials:n}),a.start]).then((function(e){if(200===e.status)return e.text();var t="XHRURLHandler: ".concat(e.statusText," (").concat(e.status,")");reject(new Error(t))})).then((function(e){return(new window.DOMParser).parseFromString(e,"text/xml")})).then((function(e){!function(e,t){t(null,e,{byteLength:null==e?void 0:e.length,statusCode:200})}(e,r),resolve()})).catch((function(e){return r(new Error(e.message))}))}catch(o){r(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!0}};var rt={get:function(e,t,r){return r||("function"==typeof t&&(r=t),t={}),"undefined"==typeof window||null===window?Ze.get(e,t,r):tt.get(e,t,r)}};var nt=0,it=0,at=function(e,t){!e||!t||e<=0||t<=0||(it=(it*nt+8*e/t)/++nt)},ot={ERRORCODE:900,extensions:[]},st=function(e){de(r,e);var t=ve(r);function r(){var e;return se(this,r),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return ce(r,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];this.emit("VAST-error",Object.assign.apply(Object,[{},ot,t].concat(n))),Ne.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return it}},{key:"fetchVAST",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(i,a){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var o=Date.now();t.emit("VAST-resolving",{url:e,previousUrl:n,wrapperDepth:r,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout}),t.urlHandler.get(e,t.fetchingOptions,(function(s,l){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Math.round(Date.now()-o),d=Object.assign({url:e,previousUrl:n,wrapperDepth:r,error:s,duration:u},c);t.emit("VAST-resolved",d),at(c.byteLength,u),s?a(s):i(l)}))}))}},{key:"initParsingStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||Je,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||rt,this.vastVersion=null,at(e.byteLength,e.requestDuration)}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var r=e?Ne.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(r,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(n){return r.previousUrl=e,r.isRootVAST=!0,r.url=e,t.parse(n,r).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:"parseVAST",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r),r.isRootVAST=!0,this.parse(e,r).then((function(e){return t.buildVASTResponse(e)}))}},{key:"buildVASTResponse",value:function(e){var t,r={ads:(t={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t.errorURLTemplates||[],version:t.version||null};return this.completeWrapperResolving(r),r}},{key:"parseVastXml",value:function(e,t){var r=t.isRootVAST,n=void 0!==r&&r,i=t.url,a=void 0===i?null:i,o=t.wrapperDepth,s=void 0===o?0:o,l=t.allowMultipleAds,c=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:a,wrapperDepth:s}),new Error("Invalid VAST XMLDocument");var u=[],d=e.documentElement.childNodes,p=e.documentElement.getAttribute("version");for(var h in n&&p&&(this.vastVersion=p),d){var f=d[h];if("Error"===f.nodeName){var v=Ce.parseNodeText(f);n?this.rootErrorURLTemplates.push(v):this.errorURLTemplates.push(v)}else if("Ad"===f.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l=!0;else if(!1===l&&u.length>1)break;var m=We(f,this.emit.bind(this),{allowMultipleAds:l,followAdditionalWrappers:c});m.ad?(u.push(m.ad),this.emit("VAST-ad-parsed",{type:m.type,url:a,wrapperDepth:s,adIndex:u.length-1,vastVersion:p})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return u}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.url,n=void 0===r?null:r,i=t.resolveAll,a=void 0===i||i,o=t.wrapperSequence,s=void 0===o?null:o,l=t.previousUrl,c=void 0===l?null:l,u=t.wrapperDepth,d=void 0===u?0:u,p=t.isRootVAST,h=void 0!==p&&p,f=t.followAdditionalWrappers,v=t.allowMultipleAds,m=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&h&&(v=!0);try{m=this.parseVastXml(e,{isRootVAST:h,url:n,wrapperDepth:d,allowMultipleAds:v,followAdditionalWrappers:f})}catch(g){return Promise.reject(g)}return 1===m.length&&null!=s&&(m[0].sequence=s),!1===a&&(this.remainingAds=Ce.splitVAST(m),m=this.remainingAds.shift()),this.resolveAds(m,{wrapperDepth:d,previousUrl:c,url:n})}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=r.wrapperDepth,i=r.previousUrl,a=r.url,o=[];return i=a,t.forEach((function(t){var r=e.resolveWrappers(t,n,i);o.push(r)})),Promise.all(o).then((function(t){var r=Ne.flatten(t);if(!r&&e.remainingAds.length>0){var o=e.remainingAds.shift();return e.resolveAds(o,{wrapperDepth:n,previousUrl:i,url:a})}return r}))}},{key:"resolveWrappers",value:function(e,t,r){var n=this;return new Promise((function(i){var a;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,i(e);if(t>=n.maxWrapperDepth||-1!==n.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,i(e);e.nextWrapperURL=Ce.resolveVastAdTagURI(e.nextWrapperURL,r),n.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var o=null!==(a=n.parsingOptions.allowMultipleAds)&&void 0!==a?a:e.allowMultipleAds,s=e.sequence;n.fetchVAST(e.nextWrapperURL,t,r).then((function(a){return n.parse(a,{url:e.nextWrapperURL,previousUrl:r,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:o}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],i(e);t.forEach((function(t){t&&Ce.mergeWrapperAdData(t,e)})),i(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,i(e)}))}))}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var r=e.ads[t];(r.errorCode||0===r.creatives.length)&&(this.trackVastError(r.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:r.errorCode||303},{ERRORMESSAGE:r.errorMessage||""},{extensions:r.extensions},{system:r.system}),e.ads.splice(t,1))}}}]),r}(Xe),lt=null,ct={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ut=function(){function e(){se(this,e),this.storage=this.initStorage()}return ce(e,[{key:"initStorage",value:function(){if(lt)return lt;try{lt="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){lt=null}return lt&&!this.isStorageDisabled(lt)||(lt=ct).clear(),lt}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(r){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),e}(),dt=function(){function e(t,r,n){se(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=r||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new st,this.storage=n||new ut,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return ce(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Date.now();return(r=Object.assign({},this.defaultOptions,r)).hasOwnProperty("resolveAll")||(r.resolveAll=!1),this.totalCallsTimeout<n?(this.totalCalls=1,this.totalCallsTimeout=n+36e5):this.totalCalls++,new Promise((function(i,a){if(t.cappingFreeLunch>=t.totalCalls)return a(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(t.totalCalls,"/").concat(t.cappingFreeLunch)));var o=n-t.lastSuccessfulAd;if(o<0)t.lastSuccessfulAd=0;else if(o<t.cappingMinimumTimeInterval)return a(new Error("VAST call canceled – (".concat(t.cappingMinimumTimeInterval,")ms minimum interval reached")));t.vastParser.getAndParseVAST(e,r).then((function(e){return i(e)})).catch((function(e){return a(e)}))}))}}]),e}(),pt=function(e){de(r,e);var t=ve(r);function r(e,n,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var s in se(this,r),(a=t.call(this)).ad=n,a.creative=i,a.variation=o,a.muted=!1,a.impressed=!1,a.skippable=!1,a.trackingEvents={},a.lastPercentage=0,a._alreadyTriggeredQuartiles={},a.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],a.creative.trackingEvents){var l=a.creative.trackingEvents[s];a.trackingEvents[s]=l.slice(0)}return Ue(a.creative)?a._initLinearTracking():a._initVariationTracking(),e&&a.on("start",(function(){e.lastSuccessfulAd=Date.now()})),a}return ce(r,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(e){return"companionAd"===e.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.skipDelay||-1;if(-1===n||this.skippable||(n>e?this.emit("skip-countdown",n-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var i=Math.round(e/this.assetDuration*100),a=[];if(e>0){a.push("start");for(var o=this.lastPercentage;o<i;o++)a.push("progress-".concat(o+1,"%"));for(var s in a.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(s,this.quartiles[s],e)&&(a.push(s),this._alreadyTriggeredQuartiles[s]=!0);this.lastPercentage=i}a.forEach((function(e){t.track(e,{macros:r,once:!0})})),e<this.progress&&this.track("rewind",{macros:r})}this.progress=e}},{key:"isQuartileReached",value:function(e,t,r){var n=!1;return t<=r&&!this._alreadyTriggeredQuartiles[e]&&(n=!0),n}},{key:"setMuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e}},{key:"setPaused",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e}},{key:"setFullscreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e}},{key:"setExpand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e}},{key:"setSkipDelay",value:function(e){"number"==typeof e&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e}))}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.error({ERRORCODE:e},t)}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("notUsed",{macros:e}),this.trackingEvents=[]}},{key:"otherAdInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!e)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var r=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!r)throw new Error("No associated verification element found for vendor: ".concat(e));var n=r.trackingEvents;if(n&&n.verificationNotExecuted){var i=n.verificationNotExecuted;this.trackURLs(i,t),this.emit("verificationNotExecuted",{trackingURLTemplates:i})}}},{key:"overlayViewDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t})}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("skip",{macros:e})}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var r=this.clickThroughURLTemplate||e,n=ae({},t);if(r){this.progress&&(n.ADPLAYHEAD=this.progressFormatted());var i=Ne.resolveURLTemplates([r],n)[0];this.emit("clickthrough",i)}}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.macros,n=void 0===r?{}:r,i=t.once,a=void 0!==i&&i;"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var o=this.trackingEvents[e],s=this.emitAlwaysEvents.indexOf(e)>-1;o?(this.emit(e,{trackingURLTemplates:o}),this.trackURLs(o,n)):s&&this.emit(e,null),a&&(delete this.trackingEvents[e],s&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}},{key:"trackURLs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ae({},t);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(n.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(n.ADPLAYHEAD=this.progressFormatted())),this.creative&&this.creative.universalAdId&&this.creative.universalAdId.idRegistry&&this.creative.universalAdId.value&&(n.UNIVERSALADID="".concat(this.creative.universalAdId.idRegistry," ").concat(this.creative.universalAdId.value)),this.ad&&(this.ad.sequence&&(n.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(n.ADTYPE=this.ad.adType),this.ad.adServingId&&(n.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(n.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(n.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),Ne.track(e,n,r)}},{key:"convertToTimecode",value:function(e){var t=1e3*e,r=Math.floor(t/36e5),n=Math.floor(t/6e4%60),i=Math.floor(t/1e3%60),a=Math.floor(t%1e3);return"".concat(Ne.leftpad(r,2),":").concat(Ne.leftpad(n,2),":").concat(Ne.leftpad(i,2),".").concat(Ne.leftpad(a,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),r}(Xe);const ht=e=>"VPAID"===e.apiFramework&&"application/javascript"===e.mimeType,ft=e=>{const t={};return t.ads=e.restAds.ads[0],t.ads.errorURLTemplates=t.ads.errorURLTemplates.map((e=>decodeURI(e))),t.containVPAID=t.ads.creatives[0].mediaFiles.some(ht),t.tracker=new pt(e.vastClient,t.ads,t.ads.creatives[0]),t.vastClient=e.vastClient,t},vt=t=>e(void 0,void 0,void 0,(function*(){if(!t.hasRemainingAds())throw new ne(Z["В текущем VAST не осталось рекламных компаний, запрашиваю новый VAST"]);try{const e=yield t.getNextAds();return ft({vastClient:t,restAds:e})}catch(e){if(t.hasRemainingAds())return vt(t);throw new ne(Z["В текущем VAST не осталось рекламных компаний, запрашиваю новый VAST"])}}));function mt(e){f(e,"svelte-1x3b6m6",".df--close.svelte-1x3b6m6{z-index:2;transition:all 0.2s linear;margin-right:14px;border:none;background:none;cursor:pointer;margin-left:auto;color:var(--color--line);float:var(--floating)}.df--close--svg.svelte-1x3b6m6{width:0.8rem}")}function gt(e){let r,n,i,o,s,l,c,u,d;return{c(){r=g("button"),n=A("svg"),i=A("title"),o=y("close icon"),s=A("g"),l=A("g"),c=A("path"),b(c,"d","M9.47,8,15.7,1.77A1.05,1.05,0,0,0,15.7.3a1.05,1.05,0,0,0-1.47,0L8,6.53,1.77.3A1.05,1.05,0,0,0,.3.3a1.05,1.05,0,0,0,0,1.47L6.53,8,.3,14.23a1.05,1.05,0,0,0,0,1.47A1.06,1.06,0,0,0,1,16a1,1,0,0,0,.73-.3L8,9.47l6.23,6.23A1,1,0,0,0,15,16a1.06,1.06,0,0,0,.74-.3,1.05,1.05,0,0,0,0-1.47Z"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"class","df--close--svg svelte-1x3b6m6"),b(n,"viewBox","0 0 16 16"),b(r,"class","df--close svelte-1x3b6m6"),b(r,"aria-label","close"),R(r,"margin",e[1]?"8px 0 8px 8px":"0 8px"),R(r,"--floating",e[1])},m(t,p){v(t,r,p),h(r,n),h(n,i),h(i,o),h(n,s),h(s,l),h(l,c),u||(d=T(r,"click",(function(){a(e[0])&&e[0].apply(this,arguments)})),u=!0)},p(t,[n]){e=t,2&n&&R(r,"margin",e[1]?"8px 0 8px 8px":"0 8px"),2&n&&R(r,"--floating",e[1])},i:t,o:t,d(e){e&&m(r),u=!1,d()}}}function At(e,t,r){let{onClick:n=(()=>{})}=t,{floating_css:i="initial"}=t;return e.$$set=e=>{"onClick"in e&&r(0,n=e.onClick),"floating_css"in e&&r(1,i=e.floating_css)},[n,i]}class yt extends X{constructor(e){super(),K(this,e,At,gt,o,{onClick:0,floating_css:1},mt)}}function kt(e){f(e,"svelte-1ilnurq",".df--reinit.svelte-1ilnurq{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:none !important;border-radius:unset;z-index:5;padding:0;margin:0;width:100%;height:101% !important;border-radius:0 !important;grid-area:1/-1;border:none;outline:none;cursor:pointer}.df--reinit--svg.svelte-1ilnurq{width:2rem !important}")}function Tt(e){let r,n,i;return{c(){r=g("button"),r.innerHTML='<svg class="df--reinit--svg svelte-1ilnurq" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54 46.67"><g><g><path d="M30.67,0A23.36,23.36,0,0,0,7.34,23.33v.08L2.73,16.46A1.48,1.48,0,0,0,.67,16,1.47,1.47,0,0,0,.25,18.1L7,28.18A1.45,1.45,0,0,0,8,28.83h.18a1.49,1.49,0,0,0,1-.38l9.31-8.39a1.49,1.49,0,1,0-2-2.21l-6.18,5.58v-.11a20.37,20.37,0,1,1,6,14.4,1.48,1.48,0,0,0-2.1,2.1A23.33,23.33,0,1,0,30.67,0Z"></path></g></g></svg>',b(r,"class","df--reinit svelte-1ilnurq"),b(r,"aria-label","reinit")},m(t,o){v(t,r,o),e[2](r),n||(i=T(r,"click",(function(){a(e[1])&&e[1].apply(this,arguments)})),n=!0)},p(t,[r]){e=t},i:t,o:t,d(t){t&&m(r),e[2](null),n=!1,i()}}}function bt(e,t,r){let{onClick:n=(()=>{})}=t,{reinitButton:i=document.createElement("button")}=t;return e.$$set=e=>{"onClick"in e&&r(1,n=e.onClick),"reinitButton"in e&&r(0,i=e.reinitButton)},[i,n,function(e){C[e?"unshift":"push"]((()=>{i=e,r(0,i)}))}]}class Rt extends X{constructor(e){super(),K(this,e,bt,Tt,o,{onClick:1,reinitButton:0},kt)}}const wt=[];function Et(e,r=t){let n;const i=new Set;function a(t){if(o(e,t)&&(e=t,n)){const t=!wt.length;for(const r of i)r[1](),wt.push(r,e);if(t){for(let e=0;e<wt.length;e+=2)wt[e][0](wt[e+1]);wt.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,s=t){const l=[o,s];return i.add(l),1===i.size&&(n=r(a)||t),o(e),()=>{i.delete(l),0===i.size&&(n(),n=null)}}}}const xt=Et(!1),Nt=Et(0);class Lt extends Error{constructor(){super(),this.name="AdsError"}toString(){return`[object ${this.name}]`}}const Ct=Et(null),It=Et(!1),Ut=Et(0),St=Et(0),Dt=Et(document.createElement("video")),Ot=t=>e(void 0,void 0,void 0,(function*(){const e=new dt;((e,t)=>{e.getParser().addURLTemplateFilter((e=>e.replace("%5Bwidth%5D",`${t[0]}`).replace("%5Bheight%5D",`${t[1]}`).replace("%5Bpage_url%5D",`${document.location.href}`).replace("%5Brandom%5D",`${Math.floor(99999999*Math.random()+1)}`)))})(e,t.widthAndHeight);return ft({restAds:yield e.get(t.url,{withCredentials:!0,wrapperLimit:7,resolveAll:!1}),vastClient:e})})),Vt=.5625,Pt=["screen and (min-width:340px)","screen and (min-width:1280px)","screen and (min-width:1920px)"];let Bt=!1;const $t=(e,t)=>{re(e)?(t.setPaused(!1),t.setDuration(1),e.play().then((()=>{Bt||(t.trackImpression(),Bt=!0),t.setPaused(!1)})).catch((e=>{}))):(e.pause(),t.setPaused(!0))},Ft=(e,t)=>{const r=e.offsetWidth;return[r,Number(r*t)]},{window:Mt}=H;function _t(e){f(e,"svelte-13sdx98",".df--video.svelte-13sdx98{width:100% !important;max-height:100%;object-fit:cover;grid-area:1/ -1}.df--video.svelte-13sdx98:hover{cursor:pointer}")}function jt(e,t,r){const n=e.slice();return n[20]=t[r],n}function qt(e){let t,r,n,i;return{c(){t=g("source"),l(t.src,r=e[20].src)||b(t,"src",r),b(t,"type",n=e[20].type),b(t,"media",i=navigator.userAgent.search(/Edge/)>0?"":e[20].media)},m(e,r){v(e,t,r)},p(e,a){1&a&&!l(t.src,r=e[20].src)&&b(t,"src",r),1&a&&n!==(n=e[20].type)&&b(t,"type",n),1&a&&i!==(i=navigator.userAgent.search(/Edge/)>0?"":e[20].media)&&b(t,"media",i)},d(e){e&&m(t)}}}function Wt(e){let r,n,a,o,s,l=!1,c=e[0].videoSources,u=[];for(let t=0;t<c.length;t+=1)u[t]=qt(jt(e,c,t));function d(){cancelAnimationFrame(a),r.paused||(a=p(d),l=!0),e[15].call(r)}return{c(){r=g("video");for(let e=0;e<u.length;e+=1)u[e].c();b(r,"class","df--video svelte-13sdx98"),r.muted=n=e[0].isMuted,b(r,"preload","metadata"),r.playsInline=!0,b(r,"x-webkit-airplay","allow"),b(r,"webkit-playsinline",""),r.controls=!1,r.autoplay=!0,R(r,"height",e[1]),b(r,"poster","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQEAAAAACwAAAAAAQABAAACAkQBADs=")},m(t,n){v(t,r,n);for(let e=0;e<u.length;e+=1)u[e].m(r,null);e[14](r),o||(s=[T(Mt,"scroll",e[13]),T(Mt,"resize",e[13]),T(r,"canplay",e[11]),T(r,"play",e[5]),T(r,"play",e[4],{once:!0}),T(r,"pause",e[7]),T(r,"error",e[6]),T(r,"click",e[10]),T(r,"volumechange",e[9]),T(r,"timeupdate",d),T(r,"mouseover",e[12]),T(r,"ended",e[8])],o=!0)},p(e,[t]){if(1&t){let n;for(c=e[0].videoSources,n=0;n<c.length;n+=1){const i=jt(e,c,n);u[n]?u[n].p(i,t):(u[n]=qt(i),u[n].c(),u[n].m(r,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}1&t&&n!==(n=e[0].isMuted)&&(r.muted=n),2&t&&R(r,"height",e[1]),!l&&8&t&&!isNaN(e[3])&&(r.currentTime=e[3]),l=!1},i:t,o:t,d(t){t&&m(r),function(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}(u,t),e[14](null),o=!1,i(s)}}}function Ht(e,t,r){let n,i,a,o;c(e,Dt,(e=>r(2,n=e))),c(e,xt,(e=>r(17,i=e))),c(e,Nt,(e=>r(18,a=e))),c(e,St,(e=>r(3,o=e)));let{props:s={isMuted:!0,videoSources:[{src:"",type:"video/mp4",media:"",poster:""}],currentAds:{},looped:"true",reinitButton:document.createElement("button"),config:{}}}=t,l="";const u=e=>{e instanceof Error&&(null==e||e.message),Ct.set(new Lt)};let d=St.subscribe((e=>{s.currentAds.tracker.setProgress(e)}));x((()=>{var e;const t=s.currentAds.tracker;$t(n,t),null===(e=s.reinitButton)||void 0===e||e.addEventListener("click",(()=>{n.setAttribute("preload","none"),n.load()})),t.on("clickthrough",(e=>{window.open(e)})),t.on("creativeView",(()=>{It.set(!0)})),t.on("complete",(()=>{xt.set(!0)}));const r=n.querySelector("source:last-child");null==r||r.addEventListener("error",u)})),N((()=>{var e;d(),null===(e=n.querySelector("source:last-child"))||void 0===e||e.removeEventListener("error",u)}));let p=!1;return e.$$set=e=>{"props"in e&&r(0,s=e.props)},[s,l,n,o,()=>s.currentAds.tracker.trackImpression(),()=>{s.currentAds.tracker.setPaused(!1)},u,()=>s.currentAds.tracker.setPaused(!0),()=>{!p&&s.currentAds.tracker.complete(),p=!0;"true"===s.looped?n.play():(s.reinitButton.setAttribute("style","display:block !important"),n.setAttribute("preload","none"),n.load())},e=>{s.currentAds.tracker.setMuted(e.target.muted)},()=>{var e,t;s.currentAds.tracker.click(null===(t=null===(e=s.currentAds.ads.creatives[0])||void 0===e?void 0:e.videoClickThroughURLTemplate)||void 0===t?void 0:t.url)},()=>{Nt.set(n.duration),s.currentAds.tracker.setDuration(a),s.currentAds.tracker.load()},()=>{s.currentAds.tracker.otherAdInteraction()},()=>{r(1,l=`${Ft(n,s.config.aspect_ratio||Vt)[1]}px`||"100%"),("false"!==s.looped||!i)&&$t(n,s.currentAds.tracker)},function(e){C[e?"unshift":"push"]((()=>{n=e,Dt.set(n)}))},function(){o=this.currentTime,St.set(o)}]}class zt extends X{constructor(e){super(),K(this,e,Ht,Wt,o,{props:0},_t)}}const Qt=e=>{const t=new MutationObserver((()=>{requestAnimationFrame((()=>{(()=>{const t=e.container.offsetWidth,r=t*e.ASPECT_RATIO;e.adUnit.resizeAd(t,r,"normal")})()}))}));return t.observe(e.container,{subtree:!0,childList:!0}),()=>{t.disconnect()}};function Gt(e){f(e,"svelte-1ybl2o0",".iframe.svelte-1ybl2o0{border:0px;margin:0px;opacity:1;padding:0px;height:0;position:absolute;width:0;top:0;left:0}")}function Yt(e){let r;return{c(){r=g("iframe"),b(r,"sandbox","allow-same-origin allow-scripts allow-popups"),b(r,"title","vpaid"),b(r,"class","iframe svelte-1ybl2o0")},m(t,n){v(t,r,n),e[2](r)},p:t,i:t,o:t,d(t){t&&m(r),e[2](null)}}}function Kt(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))};let i,a,o,s,{props:l={isMuted:!0,currentAds:{},config:{},widthAndHeight:[0,0],video:document.createElement("video"),wrapper:document.createElement("div"),container:document.createElement("div"),reinitButton:document.createElement("button")}}=t,c=()=>{};function u(){var e,t;o=null===(e=i.contentWindow)||void 0===e?void 0:e.getVPAIDAd(),(t=o).handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe||Ct.set(new Lt),o.handshakeVersion("2.0");const r=l.config.aspect_ratio||Vt;for(s in o.initAd(l.widthAndHeight[0],l.widthAndHeight[0]*r,"normal",-1,{AdParameters:l.currentAds.ads.creatives[0].adParameters},{slot:l.wrapper,videoSlot:l.video,videoSlotCanAutoPlay:!0}),c=Qt({container:l.wrapper,ASPECT_RATIO:r,adUnit:o}),a=(e=>{let t=!1;const r=()=>{e.reinitButton.setAttribute("style","display:block !important"),e.video.setAttribute("preload","none"),e.video.load()},n=e.vastTracker;return{AdLoaded:()=>{const r=setInterval((()=>t?clearInterval(r):re(e.video)?(e.adUnit.startAd(),clearInterval(r)):void 0),100)},AdVolumeChange:()=>{e.video.addEventListener("volumechange",(e=>{n.setMuted(e.target.muted)}))},AdVideoStart:()=>{t||(t=!0,n.trackImpression())},AdPlaying:()=>{try{e.adUnit.setAdVolume(0)}catch(t){}},AdError:e=>{String(e),Ct.set(new Lt)},AdLog:e=>{},AdImpression:()=>{t=!0,n.trackImpression()},AdStopped:()=>{},AdVideoComplete:()=>{e.looped,n.complete(),setTimeout(r,175)},AdUserClose:()=>{n.complete(),r()},AdPaused:()=>{},AdClickThru:e=>{n.click(e)},AdVideoFirstQuartile:()=>{n.setProgress(25)},AdVideoMidpoint:()=>{n.setProgress(50)},AdVideoThirdQuartile:()=>{n.setProgress(75)},AdSkipped:()=>{n.skip()}}})({video:l.video,adUnit:o,vastTracker:l.currentAds.tracker,looped:l.config.looped,reinitButton:l.reinitButton}),a)o.subscribe(a[s],s);((e,t)=>{t.on("resume",(()=>{e.resumeAd()})),t.on("pause",(()=>{e.pauseAd()})),t.on("start",(()=>{e.startAd()})),t.on("skip",(()=>{e.skipAd()}))})(o,l.currentAds.tracker)}return x((()=>n(void 0,void 0,void 0,(function*(){const e=i.contentWindow;null==e||e.document.write(((e,t)=>{var r,n;return`<head><style>body{margin:0}</style></head><body><script type="text/javascript" id="${t}"  charset="UTF-8" src="${null===(n=null===(r=e.ads.creatives[0])||void 0===r?void 0:r.mediaFiles[0])||void 0===n?void 0:n.fileURL}" async><\/script></body>`})(l.currentAds,"df-vpaid"));const t=null==e?void 0:e.document.querySelector("script");null==t||t.addEventListener("load",u),null==t||t.addEventListener("error",(()=>Ct.set(new ne(Z["Ошибка загрузки VPAID"]))));navigator.userAgent.indexOf("Safari")>-1&&(null==e||e.document.close())})))),N((()=>{for(s in l.currentAds.tracker.close(),a)o.unsubscribe(a[s],s);c()})),e.$$set=e=>{"props"in e&&r(1,l=e.props)},[i,l,function(e){C[e?"unshift":"push"]((()=>{i=e,r(0,i)}))}]}class Xt extends X{constructor(e){super(),K(this,e,Kt,Yt,o,{props:1},Gt)}}function Zt(e){f(e,"svelte-7la7kf",'.progress-wrapper.svelte-7la7kf.svelte-7la7kf{position:relative;width:100%;display:flex;align-items:center}.progress.svelte-7la7kf.svelte-7la7kf{width:100%;height:6px;border-radius:0px;overflow:hidden;position:absolute;margin:0 !important}.progress-bar.svelte-7la7kf.svelte-7la7kf{display:block;height:100%;background:var(--color--line);background-size:300% 100%}.df-wrapper.svelte-7la7kf.svelte-7la7kf{margin:80px 0 50px 0;position:relative}.df__fly.svelte-7la7kf.svelte-7la7kf{position:fixed;bottom:10px;right:10px;z-index:9999999;max-width:300px}.df.svelte-7la7kf.svelte-7la7kf{left:0;width:100%;height:100%;grid-area:1/-1}.df-header.svelte-7la7kf.svelte-7la7kf{position:absolute;top:-60px;display:block;content:"Ads";font-size:0.75rem;color:var(--color--line);width:100%}.df-line.svelte-7la7kf.svelte-7la7kf{background:var(--color--line);height:1px;width:100%}.df-header-ads.svelte-7la7kf.svelte-7la7kf{width:100%;display:flex;justify-content:center;align-items:center}.df-header-ads-text.svelte-7la7kf.svelte-7la7kf{padding:0 5px;z-index:1}.df-header-ads-description-text.svelte-7la7kf.svelte-7la7kf{font-size:1rem;font-weight:bold;margin-right:auto;margin-left:10px;color:var(--color--line)}.df-header-ads-description.svelte-7la7kf.svelte-7la7kf{display:flex;align-items:center;justify-content:space-between;margin-top:5px;padding:0 5px}.df-header-ads-description-icon.svelte-7la7kf.svelte-7la7kf{max-width:36px}.df.svelte-7la7kf button.svelte-7la7kf{color:var(--color--line);background:none;border:none;cursor:pointer;border-radius:50%;outline:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;justify-content:center;align-items:center}.df--controls.svelte-7la7kf.svelte-7la7kf{display:flex;list-style:none;width:100%;justify-content:flex-end;box-sizing:border-box;align-items:center;position:absolute;bottom:-35px;font-size:0.75rem;color:var(--color--line);width:100%}.df-svg-hider.svelte-7la7kf.svelte-7la7kf{opacity:1 !important;transition:opacity 0.1s cubic-bezier(0.4, 0, 1, 1)}.df--controls--mute--svg.svelte-7la7kf.svelte-7la7kf{width:1.8rem;color:var(--color--line);z-index:5}')}function Jt(e){let t,r,n,i,a,o,s,l,c,d,p,f,A=!e[4]&&er(e),y=e[10]&&rr(e);function T(t){e[26](t)}i=new zt({props:{props:{isMuted:e[5],videoSources:e[14],looped:String(e[0].looped),reinitButton:e[6],currentAds:e[1],config:e[0]}}});let R={onClick:e[17]};void 0!==e[6]&&(R.reinitButton=e[6]),o=new Rt({props:R}),C.push((()=>function(e,t,r){const n=e.$$.props[t];void 0!==n&&(e.$$.bound[n]=r,r(e.$$.ctx[n]))}(o,"reinitButton",T)));const w=[ir,nr],E=[];function x(e,t){return e[1].containVPAID?1:0}return c=x(e),d=E[c]=w[c](e),{c(){A&&A.c(),t=k(),r=g("div"),y&&y.c(),n=k(),z(i.$$.fragment),a=k(),z(o.$$.fragment),l=k(),d.c(),b(r,"class",p=u(e[10]?"df__fly":"df")+" svelte-7la7kf")},m(e,s){A&&A.m(e,s),v(e,t,s),v(e,r,s),y&&y.m(r,null),h(r,n),Q(i,r,null),h(r,a),Q(o,r,null),h(r,l),E[c].m(r,null),f=!0},p(e,a){e[4]?A&&(_(),W(A,1,1,(()=>{A=null})),j()):A?(A.p(e,a),16&a[0]&&q(A,1)):(A=er(e),A.c(),q(A,1),A.m(t.parentNode,t)),e[10]?y?(y.p(e,a),1024&a[0]&&q(y,1)):(y=rr(e),y.c(),q(y,1),y.m(r,n)):y&&(_(),W(y,1,1,(()=>{y=null})),j());const l={};99&a[0]&&(l.props={isMuted:e[5],videoSources:e[14],looped:String(e[0].looped),reinitButton:e[6],currentAds:e[1],config:e[0]}),i.$set(l);const h={};var v;!s&&64&a[0]&&(s=!0,h.reinitButton=e[6],v=()=>s=!1,U.push(v)),o.$set(h);let m=c;c=x(e),c===m?E[c].p(e,a):(_(),W(E[m],1,1,(()=>{E[m]=null})),j(),d=E[c],d?d.p(e,a):(d=E[c]=w[c](e),d.c()),q(d,1),d.m(r,null)),(!f||1024&a[0]&&p!==(p=u(e[10]?"df__fly":"df")+" svelte-7la7kf"))&&b(r,"class",p)},i(e){f||(q(A),q(y),q(i.$$.fragment,e),q(o.$$.fragment,e),q(d),f=!0)},o(e){W(A),W(y),W(i.$$.fragment,e),W(o.$$.fragment,e),W(d),f=!1},d(e){A&&A.d(e),e&&m(t),e&&m(r),y&&y.d(),G(i),G(o),E[c].d()}}}function er(e){let r,n,i,a,o,s,c,u,d,p,f=e[16]&&function(e){let t,r,n,i;return t=new yt({props:{onClick:e[23]}}),{c(){z(t.$$.fragment),r=k(),n=g("div"),b(n,"class","df-line svelte-7la7kf"),R(n,"max-width","10px")},m(e,a){Q(t,e,a),v(e,r,a),v(e,n,a),i=!0},p(e,r){const n={};128&r[0]&&(n.onClick=e[23]),t.$set(n)},i(e){i||(q(t.$$.fragment,e),i=!0)},o(e){W(t.$$.fragment,e),i=!1},d(e){G(t,e),e&&m(r),e&&m(n)}}}(e),A=!e[16]&&function(e){let r,n,i,a,o,s=e[13]?.icons[0]?.staticResource&&function(e){let r,n;return{c(){r=g("img"),b(r,"class","df-header-ads-description-icon svelte-7la7kf"),l(r.src,n=e[13]?.icons[0]?.staticResource)||b(r,"src",n),b(r,"alt","ads-logo")},m(e,t){v(e,r,t)},p:t,d(e){e&&m(r)}}}(e),c=e[1].ads.description&&tr(e);return a=new yt({props:{onClick:e[24]}}),{c(){r=g("div"),s&&s.c(),n=k(),c&&c.c(),i=k(),z(a.$$.fragment),b(r,"class","df-header-ads-description svelte-7la7kf")},m(e,t){v(e,r,t),s&&s.m(r,null),h(r,n),c&&c.m(r,null),h(r,i),Q(a,r,null),o=!0},p(e,t){e[13]?.icons[0]?.staticResource&&s.p(e,t),e[1].ads.description?c?c.p(e,t):(c=tr(e),c.c(),c.m(r,i)):c&&(c.d(1),c=null);const n={};128&t[0]&&(n.onClick=e[24]),a.$set(n)},i(e){o||(q(a.$$.fragment,e),o=!0)},o(e){W(a.$$.fragment,e),o=!1},d(e){e&&m(r),s&&s.d(),c&&c.d(),G(a)}}}(e);return{c(){r=g("div"),n=g("div"),i=g("div"),a=k(),o=g("div"),o.textContent=""+(e[15]?"Ads":"Реклама"),s=k(),c=g("div"),u=k(),f&&f.c(),d=k(),A&&A.c(),b(i,"class","df-line svelte-7la7kf"),b(o,"class","df-header-ads-text svelte-7la7kf"),b(c,"class","df-line svelte-7la7kf"),b(n,"class","df-header-ads svelte-7la7kf"),b(r,"class","df-header svelte-7la7kf"),R(r,"top",(e[16]?"-35":"-60")+"px")},m(e,t){v(e,r,t),h(r,n),h(n,i),h(n,a),h(n,o),h(n,s),h(n,c),h(n,u),f&&f.m(n,null),h(r,d),A&&A.m(r,null),p=!0},p(e,t){e[16]&&f.p(e,t),e[16]||A.p(e,t)},i(e){p||(q(f),q(A),p=!0)},o(e){W(f),W(A),p=!1},d(e){e&&m(r),f&&f.d(),A&&A.d()}}}function tr(e){let t,r,n=e[1].ads.description+"";return{c(){t=g("div"),r=y(n),b(t,"class","df-header-ads-description-text svelte-7la7kf")},m(e,n){v(e,t,n),h(t,r)},p(e,t){2&t[0]&&n!==(n=e[1].ads.description+"")&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(r,n)},d(e){e&&m(t)}}}function rr(e){let t,r;return t=new yt({props:{onClick:e[25],floating_css:"right"}}),{c(){z(t.$$.fragment)},m(e,n){Q(t,e,n),r=!0},p(e,r){const n={};1&r[0]&&(n.onClick=e[25]),t.$set(n)},i(e){r||(q(t.$$.fragment,e),r=!0)},o(e){W(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function nr(e){let t,r;return t=new Xt({props:{props:{isMuted:e[5],reinitButton:e[6],currentAds:e[1],config:e[0],widthAndHeight:e[2],video:e[12],wrapper:e[7],container:e[3]}}}),{c(){z(t.$$.fragment)},m(e,n){Q(t,e,n),r=!0},p(e,r){const n={};4335&r[0]&&(n.props={isMuted:e[5],reinitButton:e[6],currentAds:e[1],config:e[0],widthAndHeight:e[2],video:e[12],wrapper:e[7],container:e[3]}),t.$set(n)},i(e){r||(q(t.$$.fragment,e),r=!0)},o(e){W(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function ir(e){let r,n,i,a,o,s,l,c,d,p,f,y,w,E,x,N,L;return{c(){r=g("div"),n=g("div"),i=g("div"),a=k(),o=g("div"),s=g("span"),l=k(),c=g("button"),d=A("svg"),p=A("path"),f=A("path"),E=k(),x=g("div"),b(i,"class","df-line svelte-7la7kf"),b(s,"class","progress-bar svelte-7la7kf"),R(s,"width",e[9]+"%"),b(o,"class","progress svelte-7la7kf"),b(n,"class","progress-wrapper svelte-7la7kf"),b(p,"d","M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 ZM19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"),b(f,"class",y=u(e[5]?"df-svg-hider":"")+" svelte-7la7kf"),b(f,"d","M 9.25,9 7.98,10.27 24.71,27 l 1.27,-1.27 Z"),R(f,"opacity","0"),b(d,"class","df--controls--mute--svg svelte-7la7kf"),b(d,"version","1.1"),b(d,"viewBox","0 0 36 36"),b(d,"width","100%"),b(c,"class",w="df--controls--mute--button "+(e[5]?"df--controls--mute--button__mute":"")+" svelte-7la7kf"),b(c,"aria-label","mute"),b(x,"class","df-line svelte-7la7kf"),R(x,"max-width","8px"),b(r,"class","df--controls svelte-7la7kf")},m(t,u){v(t,r,u),h(r,n),h(n,i),h(n,a),h(n,o),h(o,s),h(r,l),h(r,c),h(c,d),h(d,p),h(d,f),h(r,E),h(r,x),N||(L=T(c,"click",e[27]),N=!0)},p(e,t){512&t[0]&&R(s,"width",e[9]+"%"),32&t[0]&&y!==(y=u(e[5]?"df-svg-hider":"")+" svelte-7la7kf")&&b(f,"class",y),32&t[0]&&w!==(w="df--controls--mute--button "+(e[5]?"df--controls--mute--button__mute":"")+" svelte-7la7kf")&&b(c,"class",w)},i:t,o:t,d(e){e&&m(r),N=!1,L()}}}function ar(e){let t,r,n,a,o,s=e[8]&&Jt(e);return{c(){t=g("div"),s&&s.c(),b(t,"class","df-wrapper svelte-7la7kf"),b(t,"style",r=e[11]+"; height: "+e[2][1]+"px;")},m(r,i){v(r,t,i),s&&s.m(t,null),e[28](t),n=!0,a||(o=[T(window,"scroll",e[21]),T(window,"resize",e[22])],a=!0)},p(e,i){e[8]?s?(s.p(e,i),256&i[0]&&q(s,1)):(s=Jt(e),s.c(),q(s,1),s.m(t,null)):s&&(_(),W(s,1,1,(()=>{s=null})),j()),(!n||2052&i[0]&&r!==(r=e[11]+"; height: "+e[2][1]+"px;"))&&b(t,"style",r)},i(e){n||(q(s),n=!0)},o(e){W(s),n=!1},d(r){r&&m(t),s&&s.d(),e[28](null),a=!1,i(o)}}}function or(e,t,r){let n,i,a,o,s,l;c(e,It,(e=>r(19,a=e))),c(e,xt,(e=>r(20,o=e))),c(e,Nt,(e=>r(30,s=e))),c(e,Dt,(e=>r(12,l=e)));var u,d=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))};let{widthAndHeight:p}=t,{config:h}=t,{currentAds:f}=t,{url:v}=t,{container:m}=t;const g=f.ads.creatives[0],A=((e,t)=>{if(1===(null==e?void 0:e.length)&&te(e[0].mimeType))return[{src:e[0].fileURL,type:e[0].mimeType,media:"all",poster:""}];const r=null==e?void 0:e.sort(((e,t)=>e.width<t.width?-1:1));return null==r?void 0:r.reduce(((e,r,n)=>(te(r.mimeType)&&e.push({src:r.fileURL,type:r.mimeType,media:t[n],poster:""}),e)),[])})(g.mediaFiles,h.media_querys),y=/en/g.test(navigator.language),k=(e=>{const t={"color--line":e.lineColor};switch(e.skin){case"dark":default:return Object.assign(Object.assign({},t),{"color--icon":"rgb(236, 236, 236)","color--add":"#fff","collor--bg":"rgba(0, 0, 0, 0.53);","color--stroke":"#fff"});case"white":return Object.assign(Object.assign({},t),{"color--icon":"rgb(46, 46, 46)","color--add":"rgb(109, 109, 109)","collor--bg":"rgb(236, 236, 236)","color--stroke":"#000"})}})(h);let T=!0,b=document.createElement("button"),R=document.createElement("div"),w=!0,E=0,x=!(null===(u=null==g?void 0:g.icons[0])||void 0===u?void 0:u.staticResource)&&!f.ads.description;St.subscribe((e=>{r(9,E=e/s*100||0)}));const N=()=>{f.tracker.close(),Ut.update((e=>{const t=e+1;return t>parseInt(String(h.retrays))?Ct.set(new J(Z["Превышен лимит перезапроса VAST"])):(r(8,w=!1),Ot({url:v,widthAndHeight:p}).then((e=>{r(1,f=e),r(8,w=!0)}))),t}))};let L=!1;Ct.subscribe((e=>d(void 0,void 0,void 0,(function*(){var t;if(null===e)return;const n=parseInt(null==e?void 0:e.message)>900?null==e?void 0:e.message:Z[null==e?void 0:e.message]||"900",i=()=>{f.tracker.errorWithCode(n,parseInt(n)>901)};switch(null==e?void 0:e.toString()){case"[object TerminateError]":i(),r(8,w=!1);try{null===(t=R.parentNode)||void 0===t||t.removeChild(R)}catch(e){}break;case"[object ReinitError]":i(),N();break;case"[object AdsError]":const n=yield vt(f.vastClient);n&&r(1,f=n)}}))));return e.$$set=e=>{"widthAndHeight"in e&&r(2,p=e.widthAndHeight),"config"in e&&r(0,h=e.config),"currentAds"in e&&r(1,f=e.currentAds),"url"in e&&r(18,v=e.url),"container"in e&&r(3,m=e.container)},e.$$.update=()=>{1572881&e.$$.dirty[0]&&r(10,i=h.fly&&L&&!o&&a)},r(11,n=Object.entries(k).map((([e,t])=>`--${e}:${t}`)).join(";")),[h,f,p,m,L,T,b,R,w,E,i,n,l,g,A,y,x,N,v,a,o,()=>{r(4,L=!re(R))},()=>{r(4,L=!re(R))},()=>R.parentNode?.removeChild(R),()=>R.parentNode?.removeChild(R),()=>{r(0,h.fly=!1,h)},function(e){b=e,r(6,b)},()=>{r(5,T=!T)},function(e){C[e?"unshift":"push"]((()=>{R=e,r(7,R)}))}]}class sr extends X{constructor(e){super(),K(this,e,or,ar,o,{widthAndHeight:2,config:0,currentAds:1,url:18,container:3},Zt,[-1,-1])}}const lr=e=>e.link||"true"===e.test?`https://vst.dftest2.tbhost.org/${e.sourceId}${""===e.subId?"":"?subid="+e.subId}`:`https://vst.dfnetwork.link/${e.sourceId}${""===e.subId?"":"?subid="+e.subId}`,cr=document.querySelectorAll(".df-player");e(void 0,void 0,void 0,(function*(){for(const t of Array.from(cr)){const r=t.dataset,n={media_querys:r.media_querys||Pt,aspect_ratio:parseInt(String(r.aspect_ratio))||Vt,looped:r.looped||"true",retrays:r.retrays||2,userId:r.userId||"",siteId:r.siteId||"",subId:r.subId||"",prId:r.prId||"",sourceId:r.sourceId||"",fly:r.fly||"false",test:r.test||"false",lineColor:r.lineColor||"rgb(80, 79, 79)",link:r.link},i=lr(n),a=Ft(t,n.aspect_ratio),o=r=>e(void 0,void 0,void 0,(function*(){if(!(r>parseInt(String(n.retrays))))try{const e=yield Ot({url:i,widthAndHeight:a}),o=Object.assign(Object.assign({},n),{retrays:parseInt(String(n.retrays))-r});return new sr({target:t,props:{config:o,currentAds:e,container:t,widthAndHeight:a,url:i}}),!0}catch(e){setTimeout((()=>o(r+1)),1e3)}}));o(0)}}))}();
